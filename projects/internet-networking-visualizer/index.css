/* ═══════════════════════════════════════════════════════
   INTERNET & NETWORKING VISUALIZER — Design System
   ═══════════════════════════════════════════════════════ */

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

:root{
  --bg-primary:#0a0e1a;--bg-secondary:#111827;
  --bg-card:rgba(17,24,39,0.7);--bg-card-hover:rgba(25,35,55,0.85);
  --bg-glass:rgba(255,255,255,0.04);
  --accent-cyan:#00d4ff;--accent-cyan-glow:rgba(0,212,255,0.25);
  --accent-green:#06d6a0;--accent-green-glow:rgba(6,214,160,0.25);
  --accent-amber:#ffb347;--accent-amber-glow:rgba(255,179,71,0.25);
  --accent-red:#ef476f;--accent-red-glow:rgba(239,71,111,0.25);
  --accent-purple:#9b5de5;--accent-purple-glow:rgba(155,93,229,0.25);
  --accent-blue:#4cc9f0;
  --text-primary:#f0f4f8;--text-secondary:#94a3b8;--text-muted:#64748b;
  --border-subtle:rgba(255,255,255,0.06);--border-card:rgba(255,255,255,0.08);
  --radius-sm:8px;--radius-md:14px;--radius-lg:20px;
  --shadow-card:0 4px 30px rgba(0,0,0,0.4);
  --font-sans:'Inter',system-ui,sans-serif;
  --font-mono:'JetBrains Mono','Fira Code',monospace;
  --transition-fast:0.2s cubic-bezier(0.4,0,0.2,1);
  --transition-smooth:0.4s cubic-bezier(0.4,0,0.2,1);
  --transition-spring:0.5s cubic-bezier(0.34,1.56,0.64,1);
}

html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font-sans);background:var(--bg-primary);color:var(--text-primary);line-height:1.7;overflow-x:hidden;-webkit-font-smoothing:antialiased}
code{font-family:var(--font-mono);background:rgba(0,212,255,0.12);color:var(--accent-cyan);padding:2px 7px;border-radius:5px;font-size:.88em}

/* ── Hero ──────────────────────────────────────── */
.hero{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:2rem;overflow:hidden}
.hero__bg-orbs{position:absolute;inset:0;pointer-events:none;z-index:0}
.orb{position:absolute;border-radius:50%;filter:blur(100px);opacity:.5;animation:orbFloat 12s ease-in-out infinite alternate}
.orb--1{width:500px;height:500px;background:radial-gradient(circle,var(--accent-cyan) 0%,transparent 70%);top:-10%;left:-5%}
.orb--2{width:400px;height:400px;background:radial-gradient(circle,var(--accent-green) 0%,transparent 70%);bottom:-10%;right:-5%;animation-delay:-4s}
.orb--3{width:350px;height:350px;background:radial-gradient(circle,var(--accent-purple) 0%,transparent 70%);top:40%;left:50%;animation-delay:-8s}
@keyframes orbFloat{0%{transform:translate(0,0) scale(1)}50%{transform:translate(30px,-30px) scale(1.1)}100%{transform:translate(-20px,20px) scale(.95)}}
.hero__particles{position:absolute;inset:0;pointer-events:none;z-index:0}
.hero__content{position:relative;z-index:1;max-width:800px}
.hero__badge{display:inline-block;background:linear-gradient(135deg,rgba(0,212,255,0.15),rgba(6,214,160,0.15));border:1px solid rgba(0,212,255,0.25);color:var(--accent-cyan);padding:6px 18px;border-radius:50px;font-size:.85rem;font-weight:600;letter-spacing:.5px;margin-bottom:1.5rem}
.hero__title{font-size:clamp(2.5rem,6vw,4.5rem);font-weight:900;line-height:1.1;margin-bottom:1.2rem;letter-spacing:-1.5px}
.gradient-text{background:linear-gradient(135deg,var(--accent-cyan) 0%,var(--accent-green) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero__subtitle{font-size:1.2rem;color:var(--text-secondary);max-width:600px;margin:0 auto 2.5rem;line-height:1.7}
.hero__cta{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,var(--accent-cyan),#0099cc);color:#fff;padding:14px 32px;border-radius:50px;font-weight:700;font-size:1rem;text-decoration:none;transition:var(--transition-smooth);box-shadow:0 4px 20px var(--accent-cyan-glow)}
.hero__cta:hover{transform:translateY(-3px);box-shadow:0 8px 30px var(--accent-cyan-glow)}

/* ── Section Layout ───────────────────────────── */
.section{padding:5rem 2rem;max-width:1200px;margin:0 auto}
.section+.section{border-top:1px solid var(--border-subtle)}
.section__header{display:flex;align-items:flex-start;gap:1.2rem;margin-bottom:.8rem}
.section__number{font-size:1rem;font-weight:800;color:var(--accent-cyan);background:rgba(0,212,255,0.1);border:1px solid rgba(0,212,255,0.2);padding:4px 14px;border-radius:50px;font-family:var(--font-mono);white-space:nowrap}
.section__title{font-size:clamp(1.6rem,3vw,2.2rem);font-weight:800;letter-spacing:-.5px}
.section__desc{color:var(--text-secondary);font-size:1.05rem;max-width:750px;margin-bottom:2.5rem;line-height:1.8}

/* ── Reveal Animation ─────────────────────────── */
.reveal{opacity:0;transform:translateY(40px);transition:opacity .8s ease,transform .8s ease}
.reveal.visible{opacity:1;transform:translateY(0)}

/* ── Viz Cards ────────────────────────────────── */
.viz-card{background:var(--bg-card);border:1px solid var(--border-card);border-radius:var(--radius-lg);padding:2rem;backdrop-filter:blur(12px);box-shadow:var(--shadow-card);transition:var(--transition-smooth)}
.viz-card:hover{border-color:rgba(255,255,255,0.12);background:var(--bg-card-hover)}
.viz-card+.viz-card{margin-top:1.5rem}
.viz-controls{display:flex;flex-wrap:wrap;align-items:center;gap:1rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border-subtle)}
.viz-controls label{font-size:.85rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.8px}
.viz-controls input[type="range"]{-webkit-appearance:none;appearance:none;width:200px;height:6px;background:rgba(255,255,255,0.1);border-radius:3px;outline:none;cursor:pointer}
.viz-controls input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:var(--accent-cyan);box-shadow:0 0 10px var(--accent-cyan-glow);cursor:grab;transition:var(--transition-fast)}
.viz-value{font-family:var(--font-mono);font-size:1.1rem;font-weight:700;color:var(--accent-cyan);min-width:40px}
.viz-canvas{min-height:200px;position:relative;overflow:hidden}
.viz-hint{margin-top:1rem;font-size:.85rem;color:var(--text-muted);font-style:italic}
.tp-viz-title{font-size:1.1rem;font-weight:800;margin-bottom:1rem}

/* ── Buttons ──────────────────────────────────── */
.send-btn{padding:10px 24px;background:linear-gradient(135deg,var(--accent-cyan),#0099cc);border:none;color:#fff;font-family:var(--font-sans);font-size:.9rem;font-weight:700;border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition-smooth);box-shadow:0 2px 10px var(--accent-cyan-glow)}
.send-btn:hover{transform:translateY(-2px);box-shadow:0 4px 20px var(--accent-cyan-glow)}
.send-btn:active{transform:scale(.97)}
.send-btn.secondary{background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));box-shadow:none;border:1px solid var(--border-card)}
.send-btn.secondary:hover{background:rgba(255,255,255,0.12);box-shadow:none}
.strategy-toggle{display:flex;gap:0;border-radius:var(--radius-sm);overflow:hidden;border:1px solid var(--border-card)}
.strategy-btn{padding:8px 18px;background:var(--bg-glass);border:none;color:var(--text-secondary);font-family:var(--font-sans);font-size:.85rem;font-weight:600;cursor:pointer;transition:var(--transition-fast)}
.strategy-btn.active{background:var(--accent-cyan);color:#fff}
.strategy-btn:hover:not(.active){background:rgba(255,255,255,0.08)}
.text-input{padding:8px 16px;background:rgba(255,255,255,0.06);border:1px solid var(--border-card);border-radius:var(--radius-sm);color:var(--text-primary);font-family:var(--font-mono);font-size:.85rem;outline:none;width:250px;transition:var(--transition-fast)}
.text-input:focus{border-color:var(--accent-cyan);box-shadow:0 0 15px var(--accent-cyan-glow)}

/* ── Callouts ─────────────────────────────────── */
.callout{background:rgba(255,179,71,0.06);border:1px solid rgba(255,179,71,0.15);border-radius:var(--radius-md);padding:1.2rem 1.5rem;margin-top:1.5rem;font-size:.92rem;color:var(--text-secondary);line-height:1.7}
.callout strong{color:var(--text-primary)}
.callout.cyan{background:rgba(0,212,255,0.06);border-color:rgba(0,212,255,0.15)}
.callout.red{background:rgba(239,71,111,0.06);border-color:rgba(239,71,111,0.15)}
.callout.green{background:rgba(6,214,160,0.06);border-color:rgba(6,214,160,0.15)}

/* ── DNS Flow ─────────────────────────────────── */
.dns-flow{display:flex;align-items:center;gap:0;overflow-x:auto;padding:2rem 0}
.dns-node{display:flex;flex-direction:column;align-items:center;padding:1rem;min-width:120px;border-radius:var(--radius-md);background:var(--bg-glass);border:1px solid var(--border-card);transition:var(--transition-smooth);opacity:.4;transform:scale(.9)}
.dns-node.active{opacity:1;transform:scale(1);border-color:var(--accent-cyan);box-shadow:0 0 25px var(--accent-cyan-glow)}
.dns-node__icon{font-size:2rem;margin-bottom:.4rem}
.dns-node__label{font-size:.8rem;font-weight:700;white-space:nowrap}
.dns-node__detail{font-size:.65rem;color:var(--text-muted);margin-top:.2rem;white-space:nowrap}
.dns-arrow{display:flex;align-items:center;padding:0 .3rem;opacity:.3;transition:var(--transition-smooth)}
.dns-arrow.active{opacity:1}
.dns-arrow__line{width:40px;height:2px;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-green));position:relative}
.dns-arrow__line::after{content:'▶';position:absolute;right:-8px;top:-9px;color:var(--accent-cyan);font-size:.7rem}
.dns-arrow__label{font-size:.6rem;color:var(--accent-cyan);margin-left:.3rem;white-space:nowrap}
.dns-result{margin-top:1rem;padding:1rem;border-radius:var(--radius-sm);font-family:var(--font-mono);font-size:.85rem;min-height:40px}

/* ── DNS Record Cards ─────────────────────────── */
.record-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}
.record-card{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;cursor:pointer;transition:var(--transition-smooth)}
.record-card:hover,.record-card.active{border-color:var(--accent-cyan);box-shadow:0 0 15px var(--accent-cyan-glow)}
.record-card__type{font-family:var(--font-mono);font-size:1.2rem;font-weight:800;color:var(--accent-cyan);margin-bottom:.4rem}
.record-card__desc{font-size:.82rem;color:var(--text-secondary);margin-bottom:.5rem}
.record-card__example{font-size:.75rem}

/* ── Layer Stack (OSI/TCP-IP) ─────────────────── */
.layer-stack{display:flex;flex-direction:column;gap:6px;padding:1rem 0;max-width:700px;margin:0 auto}
.layer-item{display:flex;align-items:center;padding:1rem 1.5rem;border-radius:var(--radius-sm);transition:var(--transition-smooth);opacity:.5;transform:scaleY(.9);transform-origin:top}
.layer-item.active{opacity:1;transform:scaleY(1)}
.layer-item__num{font-family:var(--font-mono);font-size:.85rem;font-weight:800;min-width:40px}
.layer-item__name{font-weight:700;font-size:.95rem;flex:1}
.layer-item__protocol{font-family:var(--font-mono);font-size:.75rem;color:var(--text-muted)}
.layer-item__header{font-family:var(--font-mono);font-size:.7rem;padding:3px 10px;border-radius:20px;margin-left:auto;opacity:0;transition:var(--transition-smooth)}
.layer-item.active .layer-item__header{opacity:1}

/* Layer colors */
.layer-item.l7{background:rgba(155,93,229,0.12);border:1px solid rgba(155,93,229,0.25);color:var(--accent-purple)}
.layer-item.l7 .layer-item__header{background:rgba(155,93,229,0.2);color:var(--accent-purple)}
.layer-item.l6{background:rgba(255,179,71,0.12);border:1px solid rgba(255,179,71,0.25);color:var(--accent-amber)}
.layer-item.l6 .layer-item__header{background:rgba(255,179,71,0.2);color:var(--accent-amber)}
.layer-item.l5{background:rgba(255,209,102,0.12);border:1px solid rgba(255,209,102,0.25);color:#ffd166}
.layer-item.l5 .layer-item__header{background:rgba(255,209,102,0.2);color:#ffd166}
.layer-item.l4{background:rgba(0,212,255,0.12);border:1px solid rgba(0,212,255,0.25);color:var(--accent-cyan)}
.layer-item.l4 .layer-item__header{background:rgba(0,212,255,0.2);color:var(--accent-cyan)}
.layer-item.l3{background:rgba(6,214,160,0.12);border:1px solid rgba(6,214,160,0.25);color:var(--accent-green)}
.layer-item.l3 .layer-item__header{background:rgba(6,214,160,0.2);color:var(--accent-green)}
.layer-item.l2{background:rgba(76,201,240,0.12);border:1px solid rgba(76,201,240,0.25);color:var(--accent-blue)}
.layer-item.l2 .layer-item__header{background:rgba(76,201,240,0.2);color:var(--accent-blue)}
.layer-item.l1{background:rgba(239,71,111,0.12);border:1px solid rgba(239,71,111,0.25);color:var(--accent-red)}
.layer-item.l1 .layer-item__header{background:rgba(239,71,111,0.2);color:var(--accent-red)}

/* ── TCP Handshake ────────────────────────────── */
.handshake-viz{display:grid;grid-template-columns:150px 1fr 150px;gap:0;min-height:350px;align-items:start}
.hs-endpoint{display:flex;flex-direction:column;align-items:center;padding:1.5rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md)}
.hs-endpoint__icon{font-size:2.5rem;margin-bottom:.5rem}
.hs-endpoint__label{font-weight:700;font-size:.95rem}
.hs-endpoint__state{font-family:var(--font-mono);font-size:.75rem;color:var(--accent-cyan);margin-top:.4rem;padding:2px 10px;background:rgba(0,212,255,0.1);border-radius:20px}
.hs-timeline{display:flex;flex-direction:column;gap:1rem;padding:1rem 0;position:relative}
.hs-timeline::before{content:'';position:absolute;left:50%;top:0;bottom:0;width:1px;background:var(--border-subtle)}
.hs-arrow{display:flex;align-items:center;padding:.8rem;border-radius:var(--radius-sm);opacity:0;transform:translateX(-20px);transition:all .5s ease}
.hs-arrow.visible{opacity:1;transform:translateX(0)}
.hs-arrow.to-server{flex-direction:row}
.hs-arrow.to-client{flex-direction:row-reverse}
.hs-arrow__line{flex:1;height:3px;border-radius:2px;position:relative}
.hs-arrow.to-server .hs-arrow__line{background:linear-gradient(90deg,var(--accent-cyan),var(--accent-green))}
.hs-arrow.to-client .hs-arrow__line{background:linear-gradient(90deg,var(--accent-green),var(--accent-cyan))}
.hs-arrow__label{font-family:var(--font-mono);font-size:.8rem;font-weight:700;padding:4px 12px;border-radius:20px;white-space:nowrap}
.hs-arrow.syn .hs-arrow__label{background:rgba(0,212,255,0.15);color:var(--accent-cyan)}
.hs-arrow.syn-ack .hs-arrow__label{background:rgba(6,214,160,0.15);color:var(--accent-green)}
.hs-arrow.ack .hs-arrow__label{background:rgba(155,93,229,0.15);color:var(--accent-purple)}
.hs-arrow.fin .hs-arrow__label{background:rgba(239,71,111,0.15);color:var(--accent-red)}
.hs-log{margin-top:1rem;font-family:var(--font-mono);font-size:.78rem;color:var(--text-muted);max-height:120px;overflow-y:auto;padding:.5rem;background:rgba(0,0,0,0.2);border-radius:var(--radius-sm)}

/* ── TCP vs UDP Comparison ────────────────────── */
.comparison-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
.comparison-card{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.5rem;transition:var(--transition-smooth)}
.comparison-card:hover{border-color:rgba(255,255,255,0.15)}
.comparison-card__title{font-size:1.4rem;font-weight:900;margin-bottom:.2rem}
.comparison-card__subtitle{font-size:.8rem;color:var(--text-muted);margin-bottom:1rem}
.comparison-card__list{list-style:none;display:flex;flex-direction:column;gap:.5rem;font-size:.88rem;color:var(--text-secondary)}
.tcp-card{border-color:rgba(0,212,255,0.2)}.tcp-card .comparison-card__title{color:var(--accent-cyan)}
.udp-card{border-color:rgba(255,179,71,0.2)}.udp-card .comparison-card__title{color:var(--accent-amber)}
.ipv4-card{border-color:rgba(76,201,240,0.2)}.ipv4-card .comparison-card__title{color:var(--accent-blue)}
.ipv6-card{border-color:rgba(6,214,160,0.2)}.ipv6-card .comparison-card__title{color:var(--accent-green)}

/* ── HTTP Viz ─────────────────────────────────── */
.http-viz{display:grid;grid-template-columns:1fr 80px 1fr;gap:0;align-items:center}
.http-panel{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;overflow:hidden}
.http-panel__title{font-size:.85rem;font-weight:700;margin-bottom:.8rem}
.http-panel__code{font-family:var(--font-mono);font-size:.72rem;line-height:1.6;color:var(--text-secondary);white-space:pre;overflow-x:auto;background:rgba(0,0,0,0.3);padding:1rem;border-radius:var(--radius-sm)}
.request-panel{border-color:rgba(0,212,255,0.2)}
.request-panel .http-panel__title{color:var(--accent-cyan)}
.response-panel{border-color:rgba(6,214,160,0.2)}
.response-panel .http-panel__title{color:var(--accent-green)}
.http-flight{display:flex;align-items:center;justify-content:center;position:relative}
.http-packet{width:20px;height:20px;border-radius:50%;background:var(--accent-cyan);box-shadow:0 0 15px var(--accent-cyan-glow);opacity:0;position:absolute}

/* ── Status Code Grid ─────────────────────────── */
.status-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
.status-category{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);overflow:hidden}
.status-category__header{padding:.8rem 1rem;font-weight:700;font-size:.85rem}
.status-category__header.success{background:rgba(6,214,160,0.1);color:var(--accent-green)}
.status-category__header.redirect{background:rgba(76,201,240,0.1);color:var(--accent-blue)}
.status-category__header.client-error{background:rgba(255,179,71,0.1);color:var(--accent-amber)}
.status-category__header.server-error{background:rgba(239,71,111,0.1);color:var(--accent-red)}
.status-category__items{padding:.8rem 1rem;display:flex;flex-wrap:wrap;gap:.5rem}
.status-chip{font-family:var(--font-mono);font-size:.72rem;padding:4px 10px;border-radius:20px;font-weight:600}
.status-chip.success{background:rgba(6,214,160,0.1);color:var(--accent-green)}
.status-chip.redirect{background:rgba(76,201,240,0.1);color:var(--accent-blue)}
.status-chip.client-error{background:rgba(255,179,71,0.1);color:var(--accent-amber)}
.status-chip.server-error{background:rgba(239,71,111,0.1);color:var(--accent-red)}

/* ── TLS Viz ──────────────────────────────────── */
.tls-viz{display:grid;grid-template-columns:120px 1fr 120px;gap:0;align-items:start;min-height:300px}
.tls-endpoint{display:flex;flex-direction:column;align-items:center;padding:1.5rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md)}
.tls-endpoint__icon{font-size:2.5rem;margin-bottom:.5rem}
.tls-endpoint__label{font-weight:700;font-size:.9rem}
.tls-steps{display:flex;flex-direction:column;gap:.8rem;padding:1rem 0}
.tls-step{display:flex;align-items:center;padding:.7rem 1rem;border-radius:var(--radius-sm);opacity:0;transform:translateY(10px);transition:all .4s ease}
.tls-step.visible{opacity:1;transform:translateY(0)}
.tls-step__icon{font-size:1.2rem;margin-right:.6rem}
.tls-step__label{font-family:var(--font-mono);font-size:.78rem;font-weight:600}
.tls-step.client-hello{background:rgba(0,212,255,0.1);border:1px solid rgba(0,212,255,0.2);color:var(--accent-cyan)}
.tls-step.server-hello{background:rgba(6,214,160,0.1);border:1px solid rgba(6,214,160,0.2);color:var(--accent-green)}
.tls-step.certificate{background:rgba(255,179,71,0.1);border:1px solid rgba(255,179,71,0.2);color:var(--accent-amber)}
.tls-step.key-exchange{background:rgba(155,93,229,0.1);border:1px solid rgba(155,93,229,0.2);color:var(--accent-purple)}
.tls-step.encrypted{background:rgba(6,214,160,0.15);border:1px solid rgba(6,214,160,0.3);color:var(--accent-green)}

.tls-comparison{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-top:1.5rem}
.tls-compare-card{padding:1.5rem;border-radius:var(--radius-md);background:var(--bg-glass);border:1px solid var(--border-card)}
.tls-compare-card__icon{font-size:2rem;margin-bottom:.5rem}
.tls-compare-card__title{font-size:1.2rem;font-weight:800;margin-bottom:.5rem}
.tls-compare-card__text{font-size:.85rem;color:var(--text-secondary);margin-bottom:1rem}
.tls-compare-card__data{font-family:var(--font-mono);font-size:.75rem;padding:.8rem;border-radius:var(--radius-sm);overflow-x:auto;word-break:break-all}
.tls-compare-card.insecure{border-color:rgba(239,71,111,0.2)}
.tls-compare-card.insecure .tls-compare-card__title{color:var(--accent-red)}
.tls-compare-card.insecure .tls-compare-card__data{background:rgba(239,71,111,0.1);color:var(--accent-red)}
.tls-compare-card.secure{border-color:rgba(6,214,160,0.2)}
.tls-compare-card.secure .tls-compare-card__title{color:var(--accent-green)}
.tls-compare-card.secure .tls-compare-card__data{background:rgba(6,214,160,0.1);color:var(--accent-green)}

/* ── Certificate Chain ────────────────────────── */
.cert-chain{display:flex;flex-direction:column;align-items:center;gap:.3rem;padding:1rem 0}
.cert-node{display:flex;align-items:center;gap:1rem;padding:1rem 2rem;border-radius:var(--radius-md);background:var(--bg-glass);border:1px solid var(--border-card);min-width:300px;transition:var(--transition-smooth)}
.cert-node:hover{border-color:rgba(255,255,255,0.15)}
.cert-node__icon{font-size:1.8rem}
.cert-node__label{font-weight:700;font-size:.9rem}
.cert-node__detail{font-size:.75rem;color:var(--text-muted)}
.cert-node.root{border-color:rgba(255,179,71,0.25)}
.cert-node.intermediate{border-color:rgba(155,93,229,0.25)}
.cert-node.leaf{border-color:rgba(6,214,160,0.25)}
.cert-arrow{font-size:.8rem;color:var(--text-muted);padding:.2rem 0}

/* ── Routing Viz ──────────────────────────────── */
.route-viz{display:flex;align-items:center;gap:.5rem;padding:1.5rem 0;overflow-x:auto}
.route-hop{display:flex;flex-direction:column;align-items:center;padding:.8rem;min-width:80px;border-radius:var(--radius-md);background:var(--bg-glass);border:1px solid var(--border-card);transition:var(--transition-smooth)}
.route-hop.active{border-color:var(--accent-cyan);box-shadow:0 0 15px var(--accent-cyan-glow)}
.route-hop.expired{border-color:var(--accent-red);opacity:.4}
.route-hop__icon{font-size:1.5rem;margin-bottom:.3rem}
.route-hop__label{font-size:.7rem;font-weight:700;white-space:nowrap}
.route-hop__ttl{font-family:var(--font-mono);font-size:.65rem;color:var(--accent-cyan);margin-top:.2rem}
.route-link{width:30px;height:2px;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-green));opacity:.3;transition:var(--transition-smooth)}
.route-link.active{opacity:1;box-shadow:0 0 8px var(--accent-cyan-glow)}
.route-log{margin-top:1rem;font-family:var(--font-mono);font-size:.75rem;color:var(--text-muted);max-height:150px;overflow-y:auto;padding:.5rem;background:rgba(0,0,0,0.2);border-radius:var(--radius-sm)}

/* ── Firewall Viz ─────────────────────────────── */
.firewall-viz{display:grid;grid-template-columns:1fr auto 1fr;gap:1.5rem;align-items:start;padding:1rem 0}
.fw-label{font-size:.8rem;font-weight:700;color:var(--text-secondary);margin-bottom:.8rem;text-transform:uppercase;letter-spacing:.8px}
.fw-packets,.fw-passed,.fw-blocked{display:flex;flex-direction:column;gap:.5rem}
.fw-packet{display:flex;align-items:center;gap:.5rem;padding:.6rem 1rem;border-radius:var(--radius-sm);font-family:var(--font-mono);font-size:.75rem;font-weight:600;border:1px solid var(--border-card);background:var(--bg-glass);transition:all .5s ease}
.fw-packet.allowed{border-color:rgba(6,214,160,0.3);background:rgba(6,214,160,0.08);color:var(--accent-green)}
.fw-packet.blocked{border-color:rgba(239,71,111,0.3);background:rgba(239,71,111,0.08);color:var(--accent-red);text-decoration:line-through}
.fw-packet.animating{animation:packetFly .6s ease}
@keyframes packetFly{0%{transform:translateX(-20px);opacity:0}100%{transform:translateX(0);opacity:1}}
.fw-wall{background:rgba(239,71,111,0.06);border:2px solid rgba(239,71,111,0.2);border-radius:var(--radius-md);padding:1.5rem;text-align:center}
.fw-wall__label{font-size:1.2rem;font-weight:800;margin-bottom:1rem}
.fw-rules{display:flex;flex-direction:column;gap:.4rem}
.fw-rule{font-family:var(--font-mono);font-size:.72rem;padding:.4rem .8rem;border-radius:var(--radius-sm)}
.fw-rule.allow{background:rgba(6,214,160,0.08);color:var(--accent-green)}
.fw-rule.deny{background:rgba(239,71,111,0.08);color:var(--accent-red)}

/* ── NAT Viz ──────────────────────────────────── */
.nat-viz{display:grid;grid-template-columns:1fr auto 1fr;gap:2rem;align-items:center;padding:2rem 0}
.nat-side{display:flex;flex-direction:column;gap:.8rem}
.nat-side__title{font-size:.85rem;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.8px;margin-bottom:.3rem}
.nat-device{padding:.7rem 1rem;border-radius:var(--radius-sm);font-family:var(--font-mono);font-size:.8rem;font-weight:600;background:var(--bg-glass);border:1px solid var(--border-card);transition:var(--transition-smooth);cursor:pointer}
.nat-device:hover{border-color:var(--accent-cyan)}
.nat-device.public-ip{border-color:rgba(6,214,160,0.3);color:var(--accent-green)}
.nat-router{display:flex;flex-direction:column;align-items:center;padding:1.5rem;background:rgba(255,179,71,0.06);border:1px solid rgba(255,179,71,0.2);border-radius:var(--radius-md)}
.nat-router__icon{font-size:2rem;margin-bottom:.3rem}
.nat-router__label{font-weight:700;font-size:.85rem;margin-bottom:.8rem}
.nat-router__table{font-family:var(--font-mono);font-size:.65rem;color:var(--text-muted)}

/* ── Proxy Comparison ─────────────────────────── */
.proxy-comparison{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
.proxy-diagram{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.5rem}
.proxy-diagram__title{font-size:1rem;font-weight:800;margin-bottom:1rem}
.proxy-diagram.forward .proxy-diagram__title{color:var(--accent-cyan)}
.proxy-diagram.reverse .proxy-diagram__title{color:var(--accent-green)}
.proxy-flow{display:flex;align-items:center;justify-content:center;gap:.8rem;margin-bottom:1rem;font-size:.85rem;font-weight:600}
.proxy-arrow{color:var(--text-muted)}
.proxy-entity{padding:.5rem 1rem;border-radius:var(--radius-sm);background:rgba(255,255,255,0.04);border:1px solid var(--border-card)}
.proxy-server{border-color:rgba(0,212,255,0.3);background:rgba(0,212,255,0.08)}
.proxy-use-cases{display:flex;flex-wrap:wrap;gap:.4rem}
.proxy-tag{font-size:.7rem;padding:3px 10px;border-radius:20px;background:rgba(255,255,255,0.06);color:var(--text-muted);font-weight:600}

/* ── CDN Viz ──────────────────────────────────── */
.cdn-viz{display:flex;align-items:center;justify-content:center;gap:1.5rem;padding:2rem 0;flex-wrap:wrap}
.cdn-entity-icon{font-size:2.5rem;margin-bottom:.3rem}
.cdn-entity-label{font-size:.8rem;font-weight:700}
.cdn-user,.cdn-edge,.cdn-origin{display:flex;flex-direction:column;align-items:center;padding:1.2rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);min-width:100px;transition:var(--transition-smooth)}
.cdn-edge{border-color:rgba(0,212,255,0.2)}
.cdn-origin{border-color:rgba(255,179,71,0.2)}
.cdn-cache-status{font-family:var(--font-mono);font-size:.7rem;font-weight:800;margin-top:.5rem;padding:3px 10px;border-radius:20px}
.cdn-path,.cdn-origin-path{width:60px;height:3px;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-green));border-radius:2px;transition:var(--transition-smooth);opacity:.4}
.cdn-path.active,.cdn-origin-path.active{opacity:1;box-shadow:0 0 10px var(--accent-cyan-glow)}
.cdn-metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-top:1.5rem}
.cdn-metric{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1rem;text-align:center}
.cdn-metric__value{font-family:var(--font-mono);font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,var(--accent-cyan),var(--accent-green));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.cdn-metric__label{font-size:.72rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-top:.3rem}

/* ── WebSocket Viz ────────────────────────────── */
.ws-viz{display:grid;grid-template-columns:120px 1fr 120px;gap:0;align-items:start;min-height:300px}
.ws-endpoint{display:flex;flex-direction:column;align-items:center;padding:1.5rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md)}
.ws-endpoint__icon{font-size:2.5rem;margin-bottom:.5rem}
.ws-endpoint__label{font-weight:700;font-size:.9rem}
.ws-channel{position:relative;display:flex;flex-direction:column;min-height:300px;border-left:2px dashed var(--border-card);border-right:2px dashed var(--border-card);padding:.5rem}
.ws-channel__label{text-align:center;font-size:.75rem;font-weight:600;color:var(--text-muted);padding:.5rem;margin-bottom:.5rem}
.ws-messages{display:flex;flex-direction:column;gap:.4rem;overflow-y:auto;max-height:280px}
.ws-msg{padding:.5rem .8rem;border-radius:var(--radius-sm);font-family:var(--font-mono);font-size:.72rem;font-weight:600;animation:msgSlide .3s ease}
.ws-msg.from-client{align-self:flex-start;background:rgba(0,212,255,0.1);border:1px solid rgba(0,212,255,0.2);color:var(--accent-cyan)}
.ws-msg.from-server{align-self:flex-end;background:rgba(6,214,160,0.1);border:1px solid rgba(6,214,160,0.2);color:var(--accent-green)}
.ws-msg.polling{background:rgba(255,179,71,0.1);border:1px solid rgba(255,179,71,0.2);color:var(--accent-amber)}
@keyframes msgSlide{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}
.ws-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-top:1.5rem}
.ws-stat{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1rem;text-align:center}
.ws-stat__value{font-family:var(--font-mono);font-size:1.3rem;font-weight:800;color:var(--accent-cyan)}
.ws-stat__label{font-size:.72rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-top:.3rem}

/* ── WebSocket Upgrade ────────────────────────── */
.ws-upgrade{display:flex;flex-direction:column;gap:1rem}
.ws-upgrade-step{display:flex;gap:1rem;align-items:flex-start}
.ws-upgrade-step__num{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent-cyan),var(--accent-green));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0}
.ws-upgrade-step__content{flex:1}
.ws-upgrade-step__title{font-weight:700;font-size:.9rem;margin-bottom:.5rem}
.ws-upgrade-step__code{font-family:var(--font-mono);font-size:.72rem;line-height:1.5;color:var(--accent-cyan);background:rgba(0,0,0,0.3);padding:.8rem;border-radius:var(--radius-sm);overflow-x:auto;white-space:pre}
.ws-upgrade-step__desc{font-size:.85rem;color:var(--text-secondary)}

/* ── Footer ───────────────────────────────────── */
.footer{padding:3rem 2rem;border-top:1px solid var(--border-subtle);text-align:center}
.footer__content{max-width:600px;margin:0 auto}
.footer__text{font-size:.95rem;color:var(--text-secondary);margin-bottom:1rem}
.footer__links{display:flex;justify-content:center;gap:1.5rem}
.footer__link{color:var(--accent-cyan);text-decoration:none;font-size:.85rem;font-weight:600;transition:var(--transition-fast)}
.footer__link:hover{color:var(--accent-green)}

/* ── Responsive ───────────────────────────────── */
@media(max-width:768px){
  .section{padding:3rem 1rem}
  .dns-flow{flex-direction:column}
  .handshake-viz{grid-template-columns:100px 1fr 100px}
  .http-viz{grid-template-columns:1fr;gap:1rem}
  .http-flight{height:40px}
  .tls-viz{grid-template-columns:80px 1fr 80px}
  .tls-comparison,.comparison-grid,.proxy-comparison{grid-template-columns:1fr}
  .ws-viz{grid-template-columns:80px 1fr 80px}
  .firewall-viz{grid-template-columns:1fr}
  .nat-viz{grid-template-columns:1fr}
  .nat-router{margin:1rem 0}
  .cdn-viz{flex-direction:column}
}
