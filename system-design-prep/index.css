/* ═══════════════════════════════════════════════════════
   SYSTEM DESIGN INTERVIEW PREP — Design System
   ═══════════════════════════════════════════════════════ */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg-primary:#0a0e1a;--bg-secondary:#111827;
  --bg-card:rgba(17,24,39,.7);--bg-card-hover:rgba(25,35,55,.85);
  --bg-glass:rgba(255,255,255,.04);
  --accent-orange:#ff6b35;--accent-orange-glow:rgba(255,107,53,.3);
  --accent-teal:#06d6a0;--accent-teal-glow:rgba(6,214,160,.25);
  --accent-blue:#4cc9f0;--accent-blue-glow:rgba(76,201,240,.25);
  --accent-purple:#9b5de5;--accent-purple-glow:rgba(155,93,229,.25);
  --accent-red:#ef476f;--accent-red-glow:rgba(239,71,111,.25);
  --accent-yellow:#ffd166;
  --text-primary:#f0f4f8;--text-secondary:#94a3b8;--text-muted:#64748b;
  --border-subtle:rgba(255,255,255,.06);--border-card:rgba(255,255,255,.08);
  --radius-sm:8px;--radius-md:14px;--radius-lg:20px;--radius-xl:28px;
  --shadow-card:0 4px 30px rgba(0,0,0,.4);
  --font-sans:'Inter',system-ui,-apple-system,sans-serif;
  --font-mono:'JetBrains Mono','Fira Code',monospace;
  --transition-fast:.2s cubic-bezier(.4,0,.2,1);
  --transition-smooth:.4s cubic-bezier(.4,0,.2,1);
  --transition-spring:.5s cubic-bezier(.34,1.56,.64,1);
}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font-sans);background:var(--bg-primary);color:var(--text-primary);line-height:1.7;overflow-x:hidden;-webkit-font-smoothing:antialiased}
code{font-family:var(--font-mono);background:rgba(255,107,53,.12);color:var(--accent-orange);padding:2px 7px;border-radius:5px;font-size:.88em}
a{color:var(--accent-blue);text-decoration:none}

/* ── Hero ─────────────────────────────────────── */
.hero{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:2rem;overflow:hidden}
.hero__bg-orbs{position:absolute;inset:0;pointer-events:none;z-index:0}
.orb{position:absolute;border-radius:50%;filter:blur(100px);opacity:.5;animation:orbFloat 12s ease-in-out infinite alternate}
.orb--1{width:500px;height:500px;background:radial-gradient(circle,var(--accent-orange) 0%,transparent 70%);top:-10%;left:-5%;animation-delay:0s}
.orb--2{width:400px;height:400px;background:radial-gradient(circle,var(--accent-teal) 0%,transparent 70%);bottom:-10%;right:-5%;animation-delay:-4s}
.orb--3{width:350px;height:350px;background:radial-gradient(circle,var(--accent-purple) 0%,transparent 70%);top:40%;left:50%;animation-delay:-8s}
@keyframes orbFloat{0%{transform:translate(0,0) scale(1)}50%{transform:translate(30px,-30px) scale(1.1)}100%{transform:translate(-20px,20px) scale(.95)}}
.hero__content{position:relative;z-index:1;max-width:800px}
.hero__badge{display:inline-block;background:linear-gradient(135deg,rgba(255,107,53,.15),rgba(6,214,160,.15));border:1px solid rgba(255,107,53,.25);color:var(--accent-orange);padding:6px 18px;border-radius:50px;font-size:.85rem;font-weight:600;letter-spacing:.5px;margin-bottom:1.5rem}
.hero__title{font-size:clamp(2.5rem,6vw,4.5rem);font-weight:900;line-height:1.1;margin-bottom:1.2rem;letter-spacing:-1.5px}
.gradient-text{background:linear-gradient(135deg,var(--accent-orange) 0%,var(--accent-teal) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero__subtitle{font-size:1.2rem;color:var(--text-secondary);max-width:600px;margin:0 auto 2.5rem;line-height:1.7}
.hero__cta{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,var(--accent-orange),#e85d2c);color:#fff;padding:14px 32px;border-radius:50px;font-weight:700;font-size:1rem;text-decoration:none;transition:var(--transition-smooth);box-shadow:0 4px 20px var(--accent-orange-glow)}
.hero__cta:hover{transform:translateY(-3px);box-shadow:0 8px 30px var(--accent-orange-glow);color:#fff}

/* ── Sections ─────────────────────────────────── */
.section{padding:5rem 2rem;max-width:1200px;margin:0 auto}
.section+.section{border-top:1px solid var(--border-subtle)}
.section__header{display:flex;align-items:flex-start;gap:1.2rem;margin-bottom:.8rem}
.section__number{font-size:1rem;font-weight:800;color:var(--accent-orange);background:rgba(255,107,53,.1);border:1px solid rgba(255,107,53,.2);padding:4px 14px;border-radius:50px;font-family:var(--font-mono);white-space:nowrap}
.section__title{font-size:clamp(1.6rem,3vw,2.2rem);font-weight:800;letter-spacing:-.5px}
.section__desc{color:var(--text-secondary);font-size:1.05rem;max-width:750px;margin-bottom:2.5rem;line-height:1.8}

/* ── Reveal on scroll ─────────────────────────── */
.reveal{opacity:0;transform:translateY(40px);transition:opacity .8s ease,transform .8s ease}
.reveal.visible{opacity:1;transform:none}

/* ── Viz Cards ────────────────────────────────── */
.viz-card{background:var(--bg-card);border:1px solid var(--border-card);border-radius:var(--radius-lg);padding:2rem;backdrop-filter:blur(12px);box-shadow:var(--shadow-card);transition:var(--transition-smooth)}
.viz-card:hover{border-color:rgba(255,255,255,.12);background:var(--bg-card-hover)}
.viz-card+.viz-card{margin-top:1.5rem}
.viz-controls{display:flex;flex-wrap:wrap;align-items:center;gap:1rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border-subtle)}
.viz-controls label{font-size:.85rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.8px}
.viz-controls input[type="range"]{-webkit-appearance:none;appearance:none;width:200px;height:6px;background:rgba(255,255,255,.1);border-radius:3px;outline:none;cursor:pointer}
.viz-controls input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:var(--accent-orange);box-shadow:0 0 10px var(--accent-orange-glow);cursor:grab;transition:var(--transition-fast)}
.viz-controls input[type="range"]::-webkit-slider-thumb:hover{transform:scale(1.2)}
.viz-value{font-family:var(--font-mono);font-size:1.1rem;font-weight:700;color:var(--accent-orange);min-width:40px}
.viz-canvas{min-height:200px;position:relative;overflow:hidden}
.viz-hint{margin-top:1rem;font-size:.85rem;color:var(--text-muted);font-style:italic}

/* ── Buttons ──────────────────────────────────── */
.send-btn{padding:10px 24px;background:linear-gradient(135deg,var(--accent-orange),#e85d2c);border:none;color:#fff;font-family:var(--font-sans);font-size:.9rem;font-weight:700;border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition-smooth);box-shadow:0 2px 10px var(--accent-orange-glow)}
.send-btn:hover{transform:translateY(-2px);box-shadow:0 4px 20px var(--accent-orange-glow)}
.send-btn:active{transform:scale(.97)}
.strategy-toggle{display:flex;gap:0;border-radius:var(--radius-sm);overflow:hidden;border:1px solid var(--border-card)}
.strategy-btn{padding:8px 18px;background:var(--bg-glass);border:none;color:var(--text-secondary);font-family:var(--font-sans);font-size:.85rem;font-weight:600;cursor:pointer;transition:var(--transition-fast)}
.strategy-btn.active{background:var(--accent-orange);color:#fff}
.strategy-btn:hover:not(.active){background:rgba(255,255,255,.08)}

/* ── Callouts ─────────────────────────────────── */
.callout{background:rgba(255,107,53,.06);border:1px solid rgba(255,107,53,.15);border-radius:var(--radius-md);padding:1.2rem 1.5rem;font-size:.92rem;line-height:1.7;color:var(--text-secondary);margin-top:1.2rem}
.callout.teal{background:rgba(6,214,160,.06);border-color:rgba(6,214,160,.15)}
.callout.red{background:rgba(239,71,111,.06);border-color:rgba(239,71,111,.15)}
.callout.blue{background:rgba(76,201,240,.06);border-color:rgba(76,201,240,.15)}
.callout.purple{background:rgba(155,93,229,.06);border-color:rgba(155,93,229,.15)}

/* ── Key Insight DL ───────────────────────────── */
.key-insight{margin-top:1.2rem}
.key-insight dt{font-weight:700;color:var(--accent-orange);font-size:.9rem;margin-top:.8rem}
.key-insight dd{color:var(--text-secondary);font-size:.9rem;margin-left:0;padding-left:1rem;border-left:2px solid rgba(255,107,53,.2)}

/* ── Section-specific titles ──────────────────── */
.tp-viz-title{font-size:1.1rem;font-weight:800;margin-bottom:.6rem}
.tp-viz-desc{color:var(--text-secondary);font-size:.92rem;margin-bottom:1.2rem;line-height:1.7}

/* ═══════════════ 01. FRAMEWORK ═══════════════ */
.framework-steps{display:flex;gap:0;align-items:center;justify-content:center;flex-wrap:wrap;padding:1rem 0}
.fw-step{display:flex;flex-direction:column;align-items:center;gap:8px;padding:1rem 1.2rem;border-radius:var(--radius-md);border:1px solid var(--border-card);background:var(--bg-glass);transition:var(--transition-smooth);cursor:pointer;min-width:120px;text-align:center;position:relative}
.fw-step .fw-icon{font-size:1.8rem}
.fw-step .fw-label{font-size:.78rem;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}
.fw-step .fw-time{font-size:.7rem;color:var(--text-muted);font-family:var(--font-mono)}
.fw-step.active{border-color:var(--accent-orange);background:rgba(255,107,53,.08);box-shadow:0 0 25px var(--accent-orange-glow)}
.fw-step.active .fw-label{color:var(--accent-orange)}
.fw-step.completed{border-color:var(--accent-teal);background:rgba(6,214,160,.06)}
.fw-step.completed .fw-label{color:var(--accent-teal)}
.fw-arrow{font-size:1.2rem;color:var(--text-muted);padding:0 .3rem}
.fw-detail{margin-top:1.5rem;padding:1.5rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);min-height:120px;transition:var(--transition-smooth)}
.fw-detail h4{color:var(--accent-orange);font-size:1rem;margin-bottom:.6rem}
.fw-detail ul{list-style:none;padding:0}
.fw-detail li{color:var(--text-secondary);font-size:.9rem;padding:4px 0;padding-left:1.2rem;position:relative}
.fw-detail li::before{content:'→';position:absolute;left:0;color:var(--accent-teal)}

/* ═══════════════ 02. ESTIMATION ═══════════════ */
.est-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
.est-input-group{display:flex;flex-direction:column;gap:.4rem}
.est-input-group label{font-size:.8rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}
.est-input{background:rgba(255,255,255,.05);border:1px solid var(--border-card);border-radius:var(--radius-sm);padding:10px 14px;color:var(--text-primary);font-family:var(--font-mono);font-size:.95rem;outline:none;transition:var(--transition-fast);width:100%}
.est-input:focus{border-color:var(--accent-orange);box-shadow:0 0 15px var(--accent-orange-glow)}
.est-results{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1.5rem}
.est-result-card{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;text-align:center;transition:var(--transition-smooth)}
.est-result-card:hover{border-color:rgba(255,107,53,.3)}
.est-result-value{font-family:var(--font-mono);font-size:1.6rem;font-weight:800;background:linear-gradient(135deg,var(--accent-orange),var(--accent-teal));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.est-result-label{font-size:.75rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.8px;margin-top:4px}
.est-presets{display:flex;gap:.6rem;flex-wrap:wrap;margin-bottom:1rem}
.est-preset{padding:6px 14px;border-radius:50px;border:1px solid var(--border-card);background:var(--bg-glass);color:var(--text-secondary);font-size:.78rem;font-weight:600;cursor:pointer;transition:var(--transition-fast)}
.est-preset:hover,.est-preset.active{background:rgba(255,107,53,.1);border-color:rgba(255,107,53,.3);color:var(--accent-orange)}

/* ═══════════════ 03. SCALABILITY ═══════════════ */
.scale-demo{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1rem 0}
.scale-panel{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.5rem;text-align:center}
.scale-panel__title{font-size:.9rem;font-weight:700;margin-bottom:1rem;display:flex;align-items:center;justify-content:center;gap:8px}
.scale-servers{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;padding:1rem 0;min-height:120px;align-items:center}
.scale-server{width:60px;height:70px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;border-radius:var(--radius-sm);border:1px solid var(--border-card);background:rgba(255,255,255,.03);transition:var(--transition-spring);font-size:.65rem;font-family:var(--font-mono);color:var(--text-muted)}
.scale-server .srv-icon{font-size:1.4rem}
.scale-server.upgraded{border-color:var(--accent-purple);background:rgba(155,93,229,.08);box-shadow:0 0 15px var(--accent-purple-glow);transform:scale(1.15)}
.scale-server.upgraded .srv-icon{font-size:1.8rem}
.scale-server.new{animation:serverPop .4s var(--transition-spring)}
@keyframes serverPop{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
.scale-load-bar{height:8px;background:rgba(255,255,255,.06);border-radius:4px;margin-top:1rem;overflow:hidden}
.scale-load-fill{height:100%;border-radius:4px;transition:width .6s ease,background .3s;background:linear-gradient(90deg,var(--accent-teal),var(--accent-orange))}

/* ═══════════════ 04. LOAD BALANCING ═══════════════ */
.lb-demo{display:grid;grid-template-columns:auto 1fr auto;gap:1.5rem;align-items:center;padding:1rem 0}
.lb-client{text-align:center}
.lb-client-icon{font-size:2.5rem;margin-bottom:.3rem}
.lb-client-label{font-size:.75rem;color:var(--text-muted);font-weight:600}
.lb-middle{display:flex;flex-direction:column;align-items:center;gap:1rem}
.lb-balancer{background:linear-gradient(135deg,rgba(155,93,229,.12),rgba(155,93,229,.04));border:2px solid rgba(155,93,229,.3);border-radius:var(--radius-md);padding:1rem 2rem;text-align:center;font-weight:700;font-size:.9rem;color:var(--accent-purple)}
.lb-arrows{display:flex;flex-direction:column;gap:4px;font-size:.8rem;color:var(--text-muted)}
.lb-servers{display:flex;flex-direction:column;gap:.8rem}
.lb-server{display:flex;align-items:center;gap:10px;padding:10px 16px;background:rgba(6,214,160,.06);border:1px solid rgba(6,214,160,.15);border-radius:var(--radius-sm);transition:var(--transition-fast);min-width:200px}
.lb-server.hit{border-color:var(--accent-orange);background:rgba(255,107,53,.1);box-shadow:0 0 15px var(--accent-orange-glow)}
.lb-server__name{font-family:var(--font-mono);font-size:.82rem;font-weight:600;color:var(--accent-teal);min-width:80px}
.lb-server__bar{flex:1;height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden}
.lb-server__fill{height:100%;border-radius:3px;background:var(--accent-teal);transition:width .3s ease}
.lb-server__count{font-family:var(--font-mono);font-size:.8rem;color:var(--text-muted);min-width:30px;text-align:right}

/* ═══════════════ 05. CACHING ═══════════════ */
.cache-flow{display:flex;align-items:center;justify-content:center;gap:1rem;padding:2rem 0;flex-wrap:wrap}
.cache-node{padding:1rem 1.5rem;border-radius:var(--radius-md);text-align:center;min-width:100px;transition:var(--transition-smooth)}
.cache-node.app{background:rgba(155,93,229,.08);border:1px solid rgba(155,93,229,.2);color:var(--accent-purple)}
.cache-node.cache-box{background:rgba(255,107,53,.08);border:1px solid rgba(255,107,53,.2);color:var(--accent-orange)}
.cache-node.db{background:rgba(6,214,160,.08);border:1px solid rgba(6,214,160,.2);color:var(--accent-teal)}
.cache-node.active{transform:scale(1.05);box-shadow:0 0 25px rgba(255,107,53,.3)}
.cache-arrow{font-size:1.3rem;color:var(--text-muted);transition:var(--transition-fast)}
.cache-arrow.active{color:var(--accent-orange);transform:scale(1.2)}
.cache-node__icon{font-size:1.8rem;margin-bottom:.3rem}
.cache-node__label{font-size:.8rem;font-weight:700}
.cache-status{text-align:center;margin-top:1rem;font-family:var(--font-mono);font-size:.9rem;min-height:30px;transition:var(--transition-fast)}
.cache-status.hit{color:var(--accent-teal)}
.cache-status.miss{color:var(--accent-red)}
.cache-log{max-height:180px;overflow-y:auto;background:rgba(0,0,0,.3);border-radius:var(--radius-sm);padding:1rem;font-family:var(--font-mono);font-size:.78rem;line-height:1.8;margin-top:1rem}
.cache-log-entry{color:var(--text-muted)}
.cache-log-entry.hit{color:var(--accent-teal)}
.cache-log-entry.miss{color:var(--accent-red)}

/* ═══════════════ 06. DATABASE ═══════════════ */
.db-compare{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1rem 0}
.db-panel{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.5rem;transition:var(--transition-smooth)}
.db-panel.active{border-color:var(--accent-orange);box-shadow:0 0 20px var(--accent-orange-glow)}
.db-panel__title{font-size:1rem;font-weight:800;margin-bottom:.8rem;display:flex;align-items:center;gap:8px}
.db-panel__icon{font-size:1.4rem}
.db-features{list-style:none;padding:0}
.db-features li{padding:6px 0;font-size:.88rem;color:var(--text-secondary);display:flex;align-items:center;gap:8px}
.db-features li .check{color:var(--accent-teal)}
.db-features li .cross{color:var(--accent-red)}
.db-scenarios{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:1.5rem}
.db-scenario{padding:8px 16px;border-radius:50px;border:1px solid var(--border-card);background:var(--bg-glass);color:var(--text-secondary);font-size:.8rem;font-weight:600;cursor:pointer;transition:var(--transition-fast)}
.db-scenario:hover{background:rgba(255,107,53,.08);border-color:rgba(255,107,53,.2);color:var(--accent-orange)}
.db-scenario.active{background:rgba(255,107,53,.12);border-color:rgba(255,107,53,.3);color:var(--accent-orange)}
.db-recommendation{margin-top:1rem;padding:1rem;background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-sm);font-size:.88rem;color:var(--text-secondary);min-height:50px}

/* ═══════════════ 07. SHARDING ═══════════════ */
.shard-demo{padding:1rem 0}
.shard-container{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;min-height:200px;align-items:flex-start}
.shard-box{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1rem;min-width:140px;text-align:center;transition:var(--transition-spring)}
.shard-box.hot{border-color:var(--accent-red);box-shadow:0 0 20px var(--accent-red-glow);animation:hotPulse 1.5s ease-in-out infinite}
@keyframes hotPulse{0%,100%{box-shadow:0 0 15px var(--accent-red-glow)}50%{box-shadow:0 0 30px rgba(239,71,111,.4)}}
.shard-box__title{font-family:var(--font-mono);font-size:.8rem;font-weight:700;color:var(--accent-blue);margin-bottom:.5rem}
.shard-box__items{display:flex;flex-direction:column;gap:3px}
.shard-item{font-size:.72rem;font-family:var(--font-mono);padding:3px 8px;border-radius:4px;background:rgba(76,201,240,.08);border:1px solid rgba(76,201,240,.15);color:var(--accent-blue);transition:var(--transition-fast)}
.shard-item.new{animation:cellPop .4s var(--transition-spring)}
@keyframes cellPop{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
.shard-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-top:1.5rem}
.shard-stat{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-sm);padding:1rem;text-align:center}
.shard-stat__value{font-family:var(--font-mono);font-size:1.4rem;font-weight:800;color:var(--accent-orange)}
.shard-stat__label{font-size:.72rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-top:2px}

/* ═══════════════ 08. CAP THEOREM ═══════════════ */
.cap-container{display:flex;gap:3rem;align-items:center;justify-content:center;flex-wrap:wrap;padding:2rem 0}
.cap-triangle{position:relative;width:320px;height:280px}
.cap-node{position:absolute;width:90px;height:90px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;border:2px solid var(--border-card);background:var(--bg-glass);cursor:pointer;transition:var(--transition-smooth);z-index:2}
.cap-node:hover{transform:scale(1.08)}
.cap-node.selected{border-color:var(--accent-orange);background:rgba(255,107,53,.12);box-shadow:0 0 25px var(--accent-orange-glow)}
.cap-node .cap-letter{font-size:1.4rem;font-weight:900;color:var(--text-primary)}
.cap-node .cap-word{font-size:.6rem;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}
.cap-node.c-node{top:0;left:50%;transform:translateX(-50%)}
.cap-node.a-node{bottom:0;left:0}
.cap-node.p-node{bottom:0;right:0}
.cap-node.c-node.selected{transform:translateX(-50%) scale(1.08)}
.cap-lines{position:absolute;inset:0;z-index:1}
.cap-lines svg{width:100%;height:100%}
.cap-lines line{stroke:rgba(255,255,255,.08);stroke-width:2}
.cap-lines line.active{stroke:var(--accent-orange);stroke-width:3;filter:drop-shadow(0 0 6px var(--accent-orange-glow))}
.cap-result{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.5rem;min-width:280px;max-width:360px}
.cap-result__title{font-size:1rem;font-weight:800;margin-bottom:.8rem;color:var(--accent-orange)}
.cap-result__db{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.8rem}
.cap-db-chip{padding:5px 12px;border-radius:50px;font-size:.78rem;font-weight:600;border:1px solid var(--border-card);background:var(--bg-glass);color:var(--text-secondary)}

/* ═══════════════ 09. MESSAGE QUEUES ═══════════════ */
.mq-demo{padding:1rem 0}
.mq-pipeline{display:grid;grid-template-columns:auto 1fr auto;gap:1.5rem;align-items:center}
.mq-producer,.mq-consumer{text-align:center}
.mq-producer__icon,.mq-consumer__icon{font-size:2.2rem;margin-bottom:.3rem}
.mq-producer__label,.mq-consumer__label{font-size:.78rem;font-weight:700;color:var(--text-muted)}
.mq-queue{background:rgba(255,107,53,.05);border:1px solid rgba(255,107,53,.15);border-radius:var(--radius-md);padding:1rem;min-height:80px;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.mq-msg{width:36px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:5px;font-family:var(--font-mono);font-size:.68rem;font-weight:700;background:rgba(255,107,53,.1);border:1px solid rgba(255,107,53,.25);color:var(--accent-orange);transition:var(--transition-fast);animation:cellPop .3s ease}
.mq-msg.consumed{background:rgba(6,214,160,.1);border-color:rgba(6,214,160,.25);color:var(--accent-teal);opacity:.6}
.mq-compare{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1.5rem}
.mq-compare-panel{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;text-align:center}
.mq-compare-panel__title{font-size:.85rem;font-weight:700;margin-bottom:.6rem}
.mq-compare-bar{height:30px;background:rgba(255,255,255,.04);border-radius:var(--radius-sm);overflow:hidden;position:relative;margin-top:.5rem}
.mq-compare-fill{height:100%;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:700;color:#fff;transition:width 1.5s ease}
.mq-compare-fill.sync{background:linear-gradient(90deg,var(--accent-red),#d63b5e)}
.mq-compare-fill.async{background:linear-gradient(90deg,var(--accent-teal),#05b388)}

/* ═══════════════ 10. CDN ═══════════════ */
.cdn-demo{padding:1rem 0}
.cdn-world{position:relative;width:100%;max-width:700px;margin:0 auto;aspect-ratio:2/1;background:rgba(255,255,255,.02);border:1px solid var(--border-card);border-radius:var(--radius-md);overflow:hidden}
.cdn-origin{position:absolute;width:50px;height:50px;border-radius:50%;background:rgba(255,107,53,.15);border:2px solid var(--accent-orange);display:flex;align-items:center;justify-content:center;font-size:1.2rem;z-index:3;top:40%;left:50%;transform:translate(-50%,-50%)}
.cdn-edge{position:absolute;width:36px;height:36px;border-radius:50%;background:rgba(6,214,160,.1);border:1.5px solid rgba(6,214,160,.3);display:flex;align-items:center;justify-content:center;font-size:.8rem;z-index:2;transition:var(--transition-smooth);cursor:pointer}
.cdn-edge:hover,.cdn-edge.active{background:rgba(6,214,160,.2);border-color:var(--accent-teal);box-shadow:0 0 15px var(--accent-teal-glow)}
.cdn-user{position:absolute;width:32px;height:32px;border-radius:50%;background:rgba(76,201,240,.1);border:1.5px solid rgba(76,201,240,.3);display:flex;align-items:center;justify-content:center;font-size:.8rem;z-index:2;cursor:pointer;transition:var(--transition-fast)}
.cdn-user.active{background:rgba(76,201,240,.2);border-color:var(--accent-blue);box-shadow:0 0 12px var(--accent-blue-glow)}
.cdn-line{position:absolute;height:2px;transform-origin:left center;z-index:1;border-radius:1px;transition:opacity .3s}
.cdn-line.origin{background:var(--accent-orange)}
.cdn-line.edge{background:var(--accent-teal)}
.cdn-latency{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-top:1.5rem}
.cdn-latency-card{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;text-align:center}
.cdn-latency-value{font-family:var(--font-mono);font-size:1.8rem;font-weight:800}
.cdn-latency-value.slow{color:var(--accent-red)}
.cdn-latency-value.fast{color:var(--accent-teal)}
.cdn-latency-label{font-size:.75rem;color:var(--text-muted);text-transform:uppercase;margin-top:4px}

/* ═══════════════ 11. RATE LIMITING ═══════════════ */
.rl-demo{padding:1rem 0}
.rl-bucket{position:relative;width:180px;height:220px;margin:0 auto;background:rgba(255,255,255,.03);border:2px solid var(--border-card);border-radius:0 0 var(--radius-md) var(--radius-md);border-top:none;overflow:hidden}
.rl-bucket-top{width:200px;margin:0 auto;height:10px;background:var(--border-card);border-radius:var(--radius-sm) var(--radius-sm) 0 0}
.rl-bucket-water{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(6,214,160,.3),rgba(6,214,160,.1));transition:height .3s ease;border-radius:0 0 calc(var(--radius-md) - 2px) calc(var(--radius-md) - 2px)}
.rl-tokens{display:flex;flex-wrap:wrap;gap:4px;padding:8px;position:absolute;bottom:8px;left:8px;right:8px;justify-content:center}
.rl-token{width:24px;height:24px;border-radius:50%;background:var(--accent-teal);display:flex;align-items:center;justify-content:center;font-size:.6rem;font-weight:800;color:#000;transition:var(--transition-spring);animation:cellPop .3s ease}
.rl-token.consumed{background:var(--accent-red);transform:scale(.8);opacity:.5}
.rl-requests{display:flex;flex-direction:column;gap:3px;margin-top:1rem;max-height:150px;overflow-y:auto;font-family:var(--font-mono);font-size:.78rem}
.rl-request{padding:4px 10px;border-radius:4px;display:flex;align-items:center;gap:6px}
.rl-request.allowed{background:rgba(6,214,160,.08);color:var(--accent-teal)}
.rl-request.rejected{background:rgba(239,71,111,.08);color:var(--accent-red)}

/* ═══════════════ 12. CHEAT SHEET ═══════════════ */
.cheat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
.cheat-card{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);overflow:hidden;transition:var(--transition-smooth);cursor:pointer}
.cheat-card:hover{border-color:rgba(255,107,53,.2);transform:translateY(-2px)}
.cheat-card__header{padding:1rem 1.2rem;display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--border-subtle)}
.cheat-card__icon{font-size:1.4rem}
.cheat-card__title{font-size:.9rem;font-weight:700;flex:1}
.cheat-card__chevron{font-size:.8rem;color:var(--text-muted);transition:transform .3s}
.cheat-card.open .cheat-card__chevron{transform:rotate(180deg)}
.cheat-card__body{max-height:0;overflow:hidden;transition:max-height .4s ease}
.cheat-card.open .cheat-card__body{max-height:600px}
.cheat-card__content{padding:1rem 1.2rem;font-size:.85rem;color:var(--text-secondary);line-height:1.7}
.cheat-card__content ul{list-style:none;padding:0}
.cheat-card__content li{padding:3px 0;padding-left:1rem;position:relative}
.cheat-card__content li::before{content:'•';position:absolute;left:0;color:var(--accent-orange)}
.cheat-card__tags{display:flex;gap:4px;flex-wrap:wrap;margin-top:.6rem}
.cheat-tag{font-size:.65rem;padding:2px 8px;border-radius:50px;background:rgba(76,201,240,.08);border:1px solid rgba(76,201,240,.15);color:var(--accent-blue);font-weight:600}

/* ═══════════════ 13. CONSISTENT HASHING ═══════════════ */
/* The Problem Demo */
.ch-naive-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;padding:1rem 0}
.ch-naive-node{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1rem;text-align:center;transition:var(--transition-smooth)}
.ch-naive-node__title{font-size:.9rem;font-weight:700;margin-bottom:.8rem;color:var(--accent-orange)}
.ch-naive-keys{display:flex;flex-wrap:wrap;gap:4px;justify-content:center}
.ch-naive-key{width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.6rem;font-weight:700;color:#fff;transition:var(--transition-spring)}
.ch-naive-key.moved{box-shadow:0 0 10px var(--accent-red);border:2px solid var(--accent-red)}
.ch-naive-stats{display:flex;justify-content:center;gap:2rem;margin-top:1rem;font-family:var(--font-mono);font-size:.9rem}
.ch-naive-stat{text-align:center}
.ch-naive-stat-val{font-size:1.4rem;font-weight:800;color:var(--accent-red)}

/* Hash Ring Demo */
.ch-ring-wrapper{position:relative;width:420px;height:420px;margin:1rem auto}
#ch-ring-canvas{width:100%;height:100%}
.ch-ring-legend{display:flex;justify-content:center;gap:1.5rem;margin-top:1rem;font-size:.8rem;color:var(--text-secondary)}
.ch-ring-legend-item{display:flex;align-items:center;gap:6px}
.ch-ring-legend-color{width:12px;height:12px;border-radius:50%}
.ch-ring-log{font-family:var(--font-mono);font-size:.75rem;background:rgba(0,0,0,.3);border-radius:var(--radius-sm);padding:.8rem;margin-top:1.5rem;max-height:100px;overflow-y:auto;color:var(--text-muted)}

/* VNodes */
.ch-vnode-bars{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem}
.ch-vnode-bar-container{display:flex;align-items:center;gap:1rem}
.ch-vnode-label{font-family:var(--font-mono);font-size:.8rem;width:80px;font-weight:600}
.ch-vnode-track{flex:1;height:12px;background:rgba(255,255,255,.05);border-radius:6px;overflow:hidden}
.ch-vnode-fill{height:100%;transition:width .5s ease;border-radius:6px}
.ch-vnode-pct{font-family:var(--font-mono);font-size:.8rem;width:40px;text-align:right}

/* Use Cases */
.ch-usecases{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:1rem}
.ch-usecase{background:var(--bg-glass);border:1px solid var(--border-card);border-radius:var(--radius-md);padding:1.2rem;transition:var(--transition-smooth)}
.ch-usecase:hover{border-color:var(--accent-teal);transform:translateY(-2px)}
.ch-usecase__icon{font-size:1.6rem;margin-bottom:.5rem}
.ch-usecase__title{font-size:.95rem;font-weight:700;color:var(--text-primary);margin-bottom:.4rem}
.ch-usecase__desc{font-size:.82rem;color:var(--text-secondary);line-height:1.6}

/* ── Footer ───────────────────────────────────── */
footer{text-align:center;padding:3rem 2rem;color:var(--text-muted);font-size:.85rem;border-top:1px solid var(--border-subtle)}

/* ── Responsive ───────────────────────────────── */
@media(max-width:768px){
  .scale-demo,.db-compare,.mq-compare,.cdn-latency,.est-grid{grid-template-columns:1fr}
  .lb-demo,.mq-pipeline{grid-template-columns:1fr;text-align:center}
  .cap-container{flex-direction:column}
  .framework-steps{flex-direction:column;align-items:stretch}
  .fw-arrow{transform:rotate(90deg);text-align:center}
  .cheat-grid{grid-template-columns:1fr}
}
